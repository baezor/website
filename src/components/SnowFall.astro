---
/**
 * Seasonal snowfall effect using @zachleat/snow-fall web component.
 * Respects user's prefers-reduced-motion preference for accessibility.
 */
interface Props {
  count?: number;
}

const { count = 75 } = Astro.props;
---

<snow-fall count={count}></snow-fall>

<script>
  import "@zachleat/snow-fall";

  // Respect user's reduced motion preference
  const snowFall = document.querySelector("snow-fall");
  if (snowFall) {
    const prefersReducedMotion = window.matchMedia(
      "(prefers-reduced-motion: reduce)"
    ).matches;

    if (prefersReducedMotion) {
      snowFall.remove();
    }
  }
</script>

<style>
  snow-fall {
    --snow-fall-color: #ffffff;
    --snow-fall-size: 8px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
  }

  :global(.dark) snow-fall {
    --snow-fall-color: #e8e8e8;
  }
</style>
